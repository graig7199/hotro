<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Liên hệ hỗ trợ</title>
  <style>
    :root{--bg:#0b0b0d;--card:#0f1724;--accent:#00d67a;--muted:#9aa3b2}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); margin:0; padding:28px; color:#e6eef6}
    .wrap{max-width:780px;margin:28px auto}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    h1{font-size:20px;margin:0 0 6px}
    p.lead{margin:0 0 12px;color:var(--muted)}
    .row{display:flex;gap:12px;align-items:center}
    .col{flex:1}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text], textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:15px}
    textarea{min-height:80px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);color:#021014;padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(0,214,122,0.14)}
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:13px}
    .field-row{display:flex;gap:8px}
    .field-row input{flex:1}
    .qr{width:160px;height:160px;border-radius:10px;background:#071018;display:flex;align-items:center;justify-content:center;color:var(--muted);overflow:hidden}
    .idbox{font-family:monospace;background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;margin-top:12px;word-break:break-all}
    footer{margin-top:14px;font-size:13px;color:var(--muted)}
    a.appstore{display:inline-block;margin-top:8px;padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.02);color:var(--accent);text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap card">
    <h1>Chat trực tiếp trên Session</h1>
    <p class="lead">Sao chép ID sau đó bấm vào nút "Mở Session" để mở ứng dụng Session và bắt đầu chat với id đó - tài khoản hỗ trợ.</p>

    <a class="appstore" href="https://apps.apple.com/vn/app/session-anonymous-messenger/id1470168868?l=vi" target="_blank" rel="noopener">Mở trang App Store — Session</a>

    <div style="display:grid;grid-template-columns:1fr 180px;gap:16px;margin-top:16px;align-items:start">
      <div>
        <label>Tên hiển thị</label>
        <div id="displayName" >taad</div>

        <label style="margin-top:10px">Session ID (đã dán sẵn)</label>
        <div class="idbox" id="idBox">059615dd19ba82e9c9d43271f72275011b181e17cb236605bb292b9f74a1c5a316</div>

        <div class="controls">
          <button id="openBtn">Tải Session</button>
          <button id="copyBtn" class="ghost">Sao chép ID</button>
          <button id="shareBtn" class="ghost">Sao chép Link</button>
        </div>

        <p class="muted" style="margin-top:10px">Ghi chú: Cài Session từ App Store.</p>
	<p class="muted" style="margin-top:10px">Session là ứng dụng nhắn tin tập trung vào quyền riêng tư.</p>
      </div>
  </div>

  <script>
    const id = '059615dd19ba82e9c9d43271f72275011b181e17cb236605bb292b9f74a1c5a316';
    const idBox = document.getElementById('idBox');
    const openBtn = document.getElementById('openBtn');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const qrArea = document.getElementById('qrArea');
    const note = document.getElementById('note');
    const displayName = document.getElementById('displayName');

    function makeSessionLink() {
      const base = 'session:' + id;
      const text = encodeURIComponent(note.value.trim());
      const name = encodeURIComponent(displayName.value.trim());
      let url = base;
      // thêm param text nếu có
      if (text) url += '?text=' + text;
      if (name) url += (url.includes('?') ? '&' : '?') + 'from=' + name;
      return url;
    }

    function makeWebFallback() {
      // Không có official web fallback doc — cung cấp App Store link as fallback with ID note
      const url = 'https://apps.apple.com/vn/app/session-anonymous-messenger/id1470168868?l=vi';
      return url;
    }

    openBtn.addEventListener('click', ()=>{
      const link = 'https://apps.apple.com/vn/app/session-anonymous-messenger/id1470168868?l=vi';
      // Thử mở deep link
      window.location.href = link;
      // Nếu không mở (trình duyệt chặn), người dùng có thể bật lại hoặc cài app
      setTimeout(()=>{
        // Sau 800ms mở fallback trang App Store (không thực sự kiểm soát được), người dùng có thể quay lại.
        if (confirm('Nếu thiết bị không mở app Session, bạn muốn mở trang App Store để cài đặt không?')) {
          window.open(makeWebFallback(), '_blank');
        }
      }, 800);
    });

    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(id);
        alert('Đã sao chép ID: ' + id);
      }catch(e){
        prompt('Sao chép thủ công ID:', id);
      }
    });

    shareBtn.addEventListener('click', async ()=>{
      const link = 'https://apps.apple.com/vn/app/session-anonymous-messenger/id1470168868?l=vi';
      try{
        await navigator.clipboard.writeText(link);
        alert('Đã sao chép link: ' + link);
      }catch(e){
        prompt('Sao chép thủ công link:', link);
      }
    });
  </script>
</body>
</html>
